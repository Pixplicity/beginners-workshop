<!DOCTYPE HTML>
<html lang="en-US">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Lesson 4 | Android Workshop for Beginners</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="dutchaug">
        <meta name="description" content="Thanks for your interest in this Android Workshop for Beginners! This page is heads-up what the workshop is all about and to lay out the prerequisites 
to setup your Android development environment.">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../section5/README.html" />
        
        
        <link rel="prev" href="../section3/README.html" />
        

        <meta property="og:title" content="Lesson 4 | Android Workshop for Beginners">
        <meta property="og:site_name" content="Android Workshop for Beginners">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/dutchaug">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="../gitbook/style.css">
        


        
    <div class="book" data-github="dutchaug/beginners-workshop" data-level="4" data-basepath=".." data-revision="1399294275009">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/dutchaug/beginners-workshop" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    
    <a href="https://github.com/dutchaug/beginners-workshop/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/dutchaug/beginners-workshop/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1><a href="../" >Android Workshop for Beginners</a></h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/dutchaug" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/dutchaug/beginners-workshop/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/dutchaug/beginners-workshop/edit/master/section4/README.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        
        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="section1/README.html">
                
                <a href="../section1/README.html">
                    <i class="fa fa-check"></i> <b>1.</b> Lesson 1
                </a>
                
                
            </li>
        
            <li  data-level="2" data-path="section2/README.html">
                
                <a href="../section2/README.html">
                    <i class="fa fa-check"></i> <b>2.</b> Lesson 2
                </a>
                
                
            </li>
        
            <li  data-level="3" data-path="section3/README.html">
                
                <a href="../section3/README.html">
                    <i class="fa fa-check"></i> <b>3.</b> Lesson 3
                </a>
                
                
            </li>
        
            <li  data-level="4" data-path="section4/README.html">
                
                <a href="../section4/README.html">
                    <i class="fa fa-check"></i> <b>4.</b> Lesson 4
                </a>
                
                
            </li>
        
            <li  data-level="5" data-path="section5/README.html">
                
                <a href="../section5/README.html">
                    <i class="fa fa-check"></i> <b>5.</b> Lesson 5
                </a>
                
                
            </li>
        
            <li  data-level="6" data-path="cheatsheet.html">
                
                <a href="../cheatsheet.html">
                    <i class="fa fa-check"></i> <b>6.</b> Cheatsheet
                </a>
                
                
            </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 66.66666666666667%;min-width: 50%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../section1/README.html" title="Lesson 1" class="chapter done new-chapter" data-progress="1" style="left: 16.666666666666668%;"></a>
    
        <a href="../section2/README.html" title="Lesson 2" class="chapter done new-chapter" data-progress="2" style="left: 33.333333333333336%;"></a>
    
        <a href="../section3/README.html" title="Lesson 3" class="chapter done new-chapter" data-progress="3" style="left: 50%;"></a>
    
        <a href="../section4/README.html" title="Lesson 4" class="chapter done new-chapter" data-progress="4" style="left: 66.66666666666667%;"></a>
    
        <a href="../section5/README.html" title="Lesson 5" class="chapter  new-chapter" data-progress="5" style="left: 83.33333333333333%;"></a>
    
        <a href="../cheatsheet.html" title="Cheatsheet" class="chapter  new-chapter" data-progress="6" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_6">
                    
                        <h1 id="lesson-4-br-listviews-and-adapters">Lesson 4<br/>ListViews and Adapters</h1>
<h2 id="what-you-ll-learn-in-this-lesson">What you&#39;ll learn in this lesson</h2>
<ul>
<li>Basic understanding of <strong>ListViews</strong> and <strong>Adapters</strong></li>
<li>Working with the <strong>ArrayAdapter</strong></li>
<li>Creating String Array resources</li>
<li>Extending the <strong>BaseAdapter</strong> to create a custom adapter</li>
<li>Creating more complex layouts for the list items</li>
</ul>
<p>If you know all about the learning goals for this lesson move on to <a href="../section5/README.html">lesson 5</a></p>
<h2 id="introduction">Introduction</h2>
<p>One of the most frequently used views in Android apps is the <a href="http://developer.android.com/guide/topics/ui/layout/listview.html" target="_blank"><strong>ListView</strong></a>. It&#39;s also one of the more complex views and can become pretty cumbersome to work with if you don&#39;t play by the rules. Lists can be huge and its child views can be complex. If you don&#39;t <em>do it the right way</em> you might experience a bad performing scroll or other odd behaviour. We hope to give you a solid introduction to good use of this powerful view.</p>
<h2 id="adding-a-listview-to-your-layout-">Adding a ListView to your layout.</h2>
<p>A <strong>ListView</strong> usually displays a (large, if not huge) list of things which you can vertically scroll. The <strong>ListView</strong> only holds the amount of list item plus or minus a couple more in memory. Every time you scroll, the views that scroll out of view are recycled and reused for the views that are scrolling into view. </p>
<p>The <em>things</em> in the list can have a custom view layout themselves. For the first example we&#39;ll simply use one of the standard layouts which you can find in the android runtime library itself. It&#39;s the layout with id <code>android.R.layout.simple_list_item_1</code>. It&#39;s a very simple layout with just one <strong>TextView</strong> with id <code>@android:id/text1</code></p>
<blockquote>
<p>Press <code>Cmd-Shift-O</code> on a Mac or <code>Ctrl-Shift-N</code> on a Windows/Linux machine to open the <strong>go to file</strong> prompt. Simply type <code>simple_list_item_1</code> in the search field. Click on one of the items you see to view this systems layout file&#39;s contents.</p>
</blockquote>
<p>Okay, we&#39;ve got a layout, now we need a <em>list of things</em>. You might retrieve your list from a server, or a database in real world Android applications, but it is good to know that for fixed lists you can easily create <strong>string array resources</strong> for every language or device specifically, just as any other Android resource.</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">string-array</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"animals"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">item</span>&gt;</span>bear<span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">item</span>&gt;</span>cat<span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">item</span>&gt;</span>chicken<span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">string-array</span>&gt;</span>
</code></pre>
<p>You can reference a string array resource from a <a href="../cheatsheet.md#context">context</a> using <code>getResources().getStringArray(R.array.animals)</code></p>
<h2 id="adapters">Adapters</h2>
<p>An <strong>Adapter</strong> object acts as a <em>bridge</em> or between an <strong>AdapterView</strong> (in our case the <strong>ListView</strong> which extends from <strong>AdapterView</strong>) and the underlying data for that view (our String array). The Adapter provides access to the data items. The Adapter is also responsible for making a <strong>View</strong> for each item in the data set by implementing a <code>public View getView (int position, View convertView, ViewGroup parent)</code> method, which our <strong>ListView</strong> conveniently calls whenever it needs to render the next view for item with position <strong>position</strong> in the list.</p>
<p>The <a href="http://developer.android.com/reference/android/widget/ArrayAdapter.html" target="_blank">ArrayAdapter</a> is a very simple implementation of the <strong>Adapter</strong> interface, which allows us to bind data in an array to a layout XML file and a single <strong>TextView</strong> in that layout.</p>
<p>We&#39;ve got all the necessary information to construct an <strong>ArrayAddapter</strong> in our example we use this constructor:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-title">ArrayAdapter</span> (Context context, <span class="hljs-keyword">int</span> resource, T[] objects)
</code></pre>
<p>Parameters:</p>
<ul>
<li><strong>context</strong> The current <a href="../cheatsheet.md#context">context</a>.</li>
<li><strong>resource</strong> The resource ID for a layout file containing a TextView to use when instantiating views.</li>
<li><strong>objects</strong> The objects to represent in the ListView.</li>
</ul>
<h2 id="exercise-04-01">Exercise 04.01</h2>
<p>It&#39;s time to put the learned stuff into practice!</p>
<ol>
<li>Import <a href="sample04">sample04</a> in Android Studio </li>
<li>Click on the <strong>TODO Tool View</strong> double click on the <code>TODO Exercise 04.01</code> item. This opens the <code>ListViewInLayoutActivity.java</code> file at the spot where you should enter the code below.</li>
<li>Set the content view to the <code>activity_listview_in_layout.xml</code> layout file.</li>
<li>Bind a local <code>ListView</code> object to the <code>ListView</code> in the layout with a <code>findViewById</code> and the id you can find in the <code>activity_listview_in_layout.xml</code> layout file.</li>
<li>Create a local variable <code>String[] entries</code> which contains the items in the <code>animals</code> string resource array (see <a href="sample04/listviews/src/main/res/values/arrays.xml">arrays.xml</a>)</li>
<li>Create a new <strong>ArrayAdapter</strong> instance with layout id <code>android.R.layout.simple_list_item_1</code> and assign this adapter to the <strong>ListView</strong> object. (At this time you should be able to see something on screen, so take your project for a spin here and click on the &quot;ListView in layout&quot; item)</li>
<li><strong>Extra</strong> Create a custom list item layout, with at least one <code>TextView</code> with id <code>@android:id/text1</code>, and assign that to the <code>ArrayAdapter</code> constructor.</li>
</ol>
<h2 id="exercise-04-02">Exercise 04.02</h2>
<ol>
<li>Import <a href="sample04">sample04</a> in Android Studio (if you have not done that already in exercise 04.01)</li>
<li>Click on the <strong>TODO Tool View</strong> double click on the <code>TODO Exercise 04.02</code> item.</li>
<li>Again create a local variable <code>String[] entries</code> which contains the items in the <code>animals</code> string resource array (see <a href="sample04/listviews/src/main/res/values/arrays.xml">arrays.xml</a>)</li>
<li>Create a new array adapter with layout id <code>android.R.layout.simple_list_item_1</code> and assign this adapter to the list view via the <code>getListView()</code> method. (You should be able to see something on screen, so take your project for a spin here and click on the &quot;ListActivity&quot; item)</li>
<li><strong>Extra</strong> Override the <code>protected void onListItemClick(ListView l, View v, int position, long id)</code> method and try to display the animal name via a <a href="../cheatsheet.md#toast">Toast</a></li>
</ol>
<h2 id="building-a-custom-adapter-with-baseadapter">Building a custom adapter with BaseAdapter</h2>
<p>Okay, a list with Strings is kind of nice as an example, but what about a list with a little bit more information. Let&#39;s say a list of animals with a thumbnail image and two textviews with the animal name and the type of animal. Something like this:</p>
<p><img src="img/custom_adapter_result.png" alt="Custom adapater result"></p>
<p>How do we go about creating that?</p>
<blockquote>
<p>You can read through the next steps or even better, follow along and do all the steps yourself! </p>
</blockquote>
<p>Create a new class with name <code>MyCustomAdapter</code> which extends the <strong>BaseAdapter</strong> class. Android Studio will immediately show you something is wrong by red underlining the class definition. Hover your mouse over the red curly line to see what&#39;s wrong.</p>
<p><img src="img/somethings_wrong.png" alt="Somethings&#39;s wrong with our custom adapter"></p>
<p>Move your cursor to the line in error an press <code>Alt-Enter</code> to see some quickfixes</p>
<p><img src="img/quick_fix_me_please.png" alt="Quick fix me please"></p>
<p>Select <code>Implement methods</code>, select all the suggested methods, click <strong>OK</strong> and watch the magic unfold.</p>
<p><img src="img/select_methods_to_implement.png" alt="Select methods to implement"></p>
<ul>
<li>The <code>getCount</code> method should return the number of items in our adapter. </li>
<li>The <code>getItem</code> method should return the actual data object for a certain position. </li>
<li>The <code>getItemId</code> should return a unique id for our data item at the given position. </li>
<li>The <code>getView</code> method is the most important and most complex method to override. The <code>getView</code> method is responsible for binding a data item at the given position to a new or recycled view (the <code>convertView</code> argument).</li>
</ul>
<p>If the <code>convertView</code> argument is <code>null</code> you have to use a so called <a href="http://developer.android.com/reference/android/view/LayoutInflater.html" target="_blank"><strong>LayoutInflater</strong></a> to convert the layout XML file to an actual <strong>View</strong> object. Here&#39;s how you do this in the <code>getView</code> method:</p>
<pre><code class="lang-java"><span class="hljs-keyword">if</span> (convertView == <span class="hljs-keyword">null</span>) {
  LayoutInflater layoutInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  convertView = layoutInflater.inflate(R.layout.custom_layout, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">false</span>);
}
</code></pre>
<p>The <code>mContext</code> field is something you normally initialize in your custom adapter constructor. (Sometimes people initialize a **LayoutInflater&amp;&amp; as a field in the constructor as well.)</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-title">CustomAdapter</span>(Context context) {
  <span class="hljs-keyword">this</span>.mContext = context;
}
</code></pre>
<p>You can use the <code>convertView</code> to find the image thumbnail and two text views.</p>
<pre><code class="lang-java">ImageView imageView = (ImageView) convertView.findViewById(R.id.thumbnail_image);
<span class="hljs-comment">// Set the image resource of imageView to something you retrieve from your data</span>

TextView textView = (TextView) convertView.findViewById(R.id.animal_name);
<span class="hljs-comment">// Etc.</span>
</code></pre>
<p>At the end of the <code>getView</code> method you should return the updated <code>convertView</code> which will be used as an item in the list view.</p>
<p>Okay, let&#39;s see this in action with some data.</p>
<h2 id="exercise-04-03">Exercise 04.03</h2>
<ol>
<li>Import <a href="sample04">sample04</a> in Android Studio (if you have not done that already in the previous exercises)</li>
<li>Click on the TODO Tool View double click on the <code>TODO Exercise 04.03</code> item.</li>
<li>Complete the <code>getCount()</code>, <code>getItem(int position)</code> and <code>getItemId(int position)</code> methods to return logical values and take your project for a spin. </li>
<li>In <code>CustomAdapterActivity</code> complete the <code>onListItemClick</code> method. Use the <code>position</code> to retrieve an <code>Animal</code> object from the <code>mCustomerAdapter</code> field and use the <code>animal.infoUrl</code> information to create a valid <code>Uri</code>.</li>
<li><strong>Extra exercise</strong> Instead of using a <strong>ListView</strong> use a <a href="http://developer.android.com/guide/topics/ui/layout/gridview.html" target="_blank"><strong>GridView</strong></a> and the same custom adapter to create a grid of animal info.</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>The <strong>ListView</strong> and extending the <strong>BaseAdapter</strong> are powerful tools to create great looking lists in your app. This lesson only showed you the tip of the iceberg. There are still many things to discover for a correct and optimal implementation of great performing lists. For example: </p>
<ul>
<li>It is highly adviced to use the <a href="http://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder" target="_blank">ViewHolder pattern</a> for better performance. </li>
<li>At some point in time you might want to add <a href="http://cyrilmottier.com/2011/07/05/listview-tips-tricks-2-section-your-listview/" target="_blank">sections to your list view</a> or</li>
<li>show <a href="http://antew.com/?p=162" target="_blank">multiple views types in your list</a>.</li>
<li>If you work with databases you will probably start extending the <a href="http://developer.android.com/reference/android/widget/CursorAdapter.html" target="_blank"><strong>CursorAdapter</strong></a> and you should definitely investiga the <a href="http://developer.android.com/guide/components/loaders.html" target="_blank"><strong>Loaders</strong> pattern</a> for <em>asynchronously</em> loading the data and automatically updating the list when items in the database change.</li>
</ul>
<p>On to <a href="../section5/README.html">lesson 5</a> where you will learn about <strong>Fragments</strong>, the <strong>ViewPager</strong> UI pattern and playing sounds with the <strong>MediaPlayer</strong>.</p>
<h2 id="solutions">Solutions</h2>
<ul>
<li><a href="https://gist.github.com/dutchaug/9942397" target="_blank">Exercise 04.01</a></li>
<li><a href="https://gist.github.com/dutchaug/9942560" target="_blank">Exercise 04.02</a></li>
<li><a href="https://gist.github.com/dutchaug/9942707" target="_blank">Exercise 04.03</a></li>
</ul>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../section3/README.html" class="navigation navigation-prev"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../section5/README.html" class="navigation navigation-next"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../gitbook/app.js"></script>
        

    
    <script src="../gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

    </body>
</html>
